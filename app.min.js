!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("mongoose")},function(e,t,r){e.exports=r(3)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if("listen"!==e.syscall)throw e;var t="string"==typeof m?"Pipe "+m:"Port "+m;switch(e.code){case"EACCES":console.error(t+" requires elevated privileges"),process.exit(1);break;case"EADDRINUSE":console.error(t+" is already in use"),process.exit(1);break;default:throw e}}function s(){var e=g.address(),t="string"==typeof e?"pipe "+e:"port "+e.port;(0,d.default)("Listening on "+t)}var u=r(4),i=n(u),a=r(15),d=n(a),l=r(16),f=n(l),c=r(1),p=n(c),m=function(e){var t=parseInt(e,10);return isNaN(t)?e:t>=0&&t}(process.env.PORT||"3000");i.default.set("port",m);var g=f.default.createServer(i.default);p.default.connect("mongodb://127.0.0.1:27017/itbs",{useMongoClient:!0}),p.default.Promise=global.Promise,g.listen(m),g.on("error",o),g.on("listening",s)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=n(o),u=r(5),i=n(u),a=r(6),d=(n(a),r(7)),l=n(d),f=r(8),c=n(f),p=r(9),m=n(p),g=r(10),v=n(g),_=r(11),y=n(_),b=r(14),h=n(b),x=(0,s.default)();x.set("views",i.default.join(__dirname,"views")),x.set("view engine","ejs"),x.use((0,l.default)("dev")),x.use(m.default.json()),x.use(m.default.urlencoded({extended:!1})),x.use((0,c.default)()),x.use(s.default.static(i.default.join(__dirname,"public"))),x.use("/",v.default),x.use("/api",h.default),x.use("/users",y.default),x.use(function(e,t,r){var n=new Error("Not Found");n.status=404,r(n)}),x.use(function(e,t,r,n){r.locals.message=e.message,r.locals.error="development"===t.app.get("env")?e:{},r.status(e.status||500),r.render("error")}),t.default=x},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("serve-favicon")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n),s=o.default.Router();s.get("/",function(e,t,r){t.render("index",{title:"login"})}),s.get("/signin",function(e,t,r){t.render("signin",{title:"signin"})}),t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n),s=r(12),u=o.default.Router();u.post("/login",function(e,t,r){t.json(e.body)}),u.post("/register",function(e,t,r){(0,s.addUser)({firstName:e.body.firstName,lastName:e.body.lastName,email:e.body.email,password:e.body.password,phone:e.body.phone,role:e.body.role}).then(function(e){t.status(200).json(e)}).catch(function(e){t.status(500).json(e)})}),t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(1),s=n(o),u=r(13),i=n(u),a=new s.default.Schema({firstName:String,lastName:String,email:{type:String,index:{unique:!0}},isVerified:{type:Boolean,default:!1},phone:String,password:String,roles:[]});a.methods.generateHash=function(e){return i.default.hashSync(e,i.default.genSaltSync(8),null)},a.methods.validPassword=function(e){return i.default.compareSync(e,this.password)},t.UserSchema=a;var d=s.default.model("user",a);t.UserModel=d,t.addUser=function(e){var t=e.firstName,r=e.lastName,n=e.email,o=e.password,s=e.phone,u=e.role,i=new d({firstName:t,lastName:r,email:n,phone:s});return i.password=i.generateHash(o),i.roles.push(u),new Promise(function(e,t){i.save(function(r,n){r?t(r):e(n)})})}},function(e,t){e.exports=require("bcrypt-nodejs")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n),s=o.default.Router();s.get("/",function(e,t,r){t.send({routeName:"/api/"})}),s.get("/users",function(e,t,r){t.send({routeName:" get /api/users"})}),s.post("/users",function(e,t,r){t.send({routeName:"post /api/users"})}),s.delete("/users",function(e,t,r){t.send({routeName:"delete /api/users"})}),s.put("/users",function(e,t,r){t.send({routeName:" put /api/users"})}),t.default=s},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("http")}]);